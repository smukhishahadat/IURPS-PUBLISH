@model IUEMS.Areas.ControllerSection.Models.BalamViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPageMetronic.cshtml";

    //Courses
    var courses = ViewBag.course_list;
    var courses_1st = courses[0];
    var courses_2nd = courses[1];
    int courses_1st_cnt = courses_1st.Count;
    int courses_2nd_cnt = courses_2nd.Count;

    //Marks Sheet
    var marks=ViewBag.marks_list;
    var marks_1st = marks[0];
    var marks_2nd = marks[1];
    int cmarks_1st_cnt = marks_1st.Count;
    int cmarks_2nd_cnt = marks_2nd.Count;

}
<style type="text/css">
    .ui-autocomplete {
        z-index: 2147483647;
    }
</style>
<link href="../../assets/admin/layout/css/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="../../assets/admin/layout/scripts/jquery-ui.js"></script>

<div class='row'>
    <div class='col-md-10 text-left'>
        <h3 class='text-info'>Balam Book</h3>
    </div>
    @*<div class='col-md-2 text-right'>
            <button class='btn btn-success btn-madd' onclick='btnAddClick($(this))' myUrl='@Create'><i class='fa fa-plus-circle'></i> Add</button>
        </div>*@
</div>
<div class="row">
    <div class="col-md-12">
        <table class="table table-striped table-hover table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">@*@Html.LabelFor(model => model.First().STUDENT_ID, htmlAttributes: new { @class = "control-label col-md-4" })<span class="font-red">*</span>*@</th>

                    <td>
                        <input type="text" name="STUDENT_ID" id="STUDENT_ID" class="form-control" />
                    </td>
                    <td colspan="5"><input type="button" name="btn_src" class="btn btn-info SearchReport" value="Search" /></td>
                </tr>
            </thead>

        </table>
    </div>
</div>
<div class="row" id="div_result" style="">
    <div class="col-md-12">
        <table style="width:100%;" align="center">
            <tr>
                <td valign="top">
                    <table class="short_tbl_key_info" style="border-collapse:collapse;text-align: center;font-size:10px;" border="1">
                        <thead>
                            <tr>
                                <td colspan="4" style="text-align:center;"><b>GRADING SYSTEM</b></td>
                            </tr>
                            <tr>
                                <th style="text-align:center;">Marks Range</th>
                                <th style="text-align:center;">LG</th>
                                <th style="text-align:center;">GP</th>
                                <th style="text-align:center;">Remarks</th>
                            </tr>
                        </thead>
                        @{
                            var min_marks = "";
                            int i = 0;
                        }
                        <tbody id="grade_list">
                            @foreach (var val in Model.GRADE_SHEET_DETAIL)
                            {
                                if (i == 0)
                                {
                                    min_marks = val.MINIMUM_MARKS + "% and above ";
                                }
                                else
                                {
                                    min_marks = val.MINIMUM_MARKS + "% less than ";
                                }
                                var max_marks = val.MAXIMUM_MARKS;
                                var numerical_mark = min_marks + max_marks + "%";
                                var lg = val.LETTER_GRADE;
                                var gp = val.GRADE_POINT;
                                var remarks = val.REMARKS;
                                <tr>
                                    <td style="padding:5px;">@numerical_mark</td>
                                    <td style="padding:5px;">@lg</td>
                                    <td style="padding:5px;">@gp</td>
                                    <td style="padding:5px;">@remarks</td>
                                </tr>
                                i++;
                            }
                        </tbody>
                    </table>
                </td>
                <td valign="top">
                    <table style="border-collapse:collapse;text-align: center;" align="center" class="short_tbl_key_info">
                        <tr>
                            <td><img alt="" src="@Server.MapPath("~/assets/admin/layout/img/avatar3_small.png")"></td>
                            <td>
                                <span style="font-weight:bold;font-size:34px;text-align:center;margin-left:10px;">ISLAMIC UNIVERSITY</span>
                                <br />
                                Kushtia-Jhenidah, Bangladesh

                            </td>
                        </tr>
                        <tr><td colspan="4"><span id="faculty_name">@*@Html.DisplayFor(model => model.MarksheetStdInfo.FACULTY_NAME)*@</span></td></tr>
                        <tr><td colspan="4"><span id="dept_name">@*@Html.DisplayFor(model => model.MarksheetStdInfo.DEPARTMENT_NAME)*@</span></td></tr>
                        <tr><td colspan="4"><span id="program_name">@*@Html.DisplayFor(model => model.MarksheetStdInfo.PROGRAM_NAME)*@</span> </td></tr>
                        <tr>
                            <td colspan="4">
                                <b>Admission Session: </b><span id="session_year">@*@Html.DisplayFor(model => model.MarksheetStdInfo.APPLICANT_SESSION)*@</span>
                                <span id="semester"></span>
                                <br />
                                <span id="academic_year">@*@Html.DisplayFor(model => model.MarksheetStdInfo.LEVEL_NAME)*@</span>-<span id="exam_year">@*@ViewBag.exam_year*@</span>

                            </td>
                        </tr>

                    </table>
                </td>
                <td valign="top">
                    <table class="" style="border-collapse:collapse;text-align: center;font-size:8px;" border="1">
                        <tr><td colspan="5">RESULT STATISTICS</td></tr>
                        <tr>
                            <td>Particulars</td>
                            <td>Male</td>
                            <td>Female</td>
                            <td>Total</td>
                            <td>Awarded</td>
                        </tr>
                    </table>
                </td>
                <td valign="top">
                    <table class="" style="border-collapse:collapse;text-align: center;font-size:8px;" border="1">
                        <tr>
                            <td colspan="4">
                                COURSE NUMBER AND TITLES
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <b>First Year</b>
                            </td>
                            <td>Second Year</td>
                            <td>Third Year</td>
                            <td>Fourth Year</td>
                        </tr>
                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td colspan="2">
                                            <b style="text-decoration:underline;">1st Semester</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>111</th>
                                        <td>:</td>
                                        <td>Course Name</td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <b style="text-decoration:underline;">2nd Semester</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>111</th>
                                        <td>:</td>
                                        <td>Course Name</td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">1st Semester</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">2nd Semester</b>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">1st Semester</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">2nd Semester</b>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td>
                                <table>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">1st Semester</b>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <b style="text-decoration:underline;">2nd Semester</b>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
    
    @*Final Result Table*@
    <div class="col-md-12" style="margin-top:20px;">
        <table class="" style="border-collapse:collapse;text-align: center;font-size:12px;width:100%;" border="1">
            <tr>
                <td rowspan="5">Student Information</td>
                <td rowspan="2">&nbsp;</td>
                <td colspan="@(courses_1st_cnt+courses_2nd_cnt+1)">First Year</td>
                <td colspan="2">Second Year</td>
                <td colspan="2">Third Year</td>
                <td colspan="2">Fourth Year</td>
            </tr>
            <tr>
                <td colspan="@courses_1st_cnt">First Semester</td>
                <td colspan="@courses_2nd_cnt">Second Semester</td>
                <td rowspan="4">Result</td>
                <td>First Semester</td>
                <td>Second Semester</td>

                <td>First Semester</td>
                <td>Second Semester</td>

                <td>First Semester</td>
                <td>Second Semester</td>
            </tr>
            <tr>
                <td>Course Code</td>
                @foreach (var cours_list in courses_1st)
                {
                    <td>@cours_list.COURSE_CODE</td>
                }
                @foreach (var cours_list in courses_2nd)
                {
                    <td>@cours_list.COURSE_CODE</td>
                }

            </tr>
            <tr>
                <td>Full Marks</td>
                @foreach (var cours_list in courses_1st)
                {
                    <td>@cours_list.FULL_MARKS</td>
                }
                @foreach (var cours_list in courses_2nd)
                {
                    <td>@cours_list.FULL_MARKS</td>
                }
            </tr>
            <tr>
                <td>Credit</td>
                @foreach (var cours_list in courses_1st)
                {
                    <td>@cours_list.COURSE_CREDIT</td>
                }
                @foreach (var cours_list in courses_2nd)
                {
                    <td>@cours_list.COURSE_CREDIT</td>
                }
            </tr>
            @{
                var ij = 0;
            }
            @foreach (var std_list in Model.MarksheetStdInfo)
            {
                <tr>
                    <td rowspan="10">
                        @std_list.FULL_NAME
                        <br />
                        @std_list.STUDENT_ID
                        <br />
                        @std_list.REG_NO
                        <br />
                    </td>
                    <td>Internal Evalution</td>
                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            internal_mark = marks[k][ij].INTERNAL_MARKS;
                        }

                        <td>@internal_mark</td>
                    }

                </tr>
                <tr>
                    <td>Written Marks</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            internal_mark = marks[k][ij].AVG_MARKS;
                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Total Marks</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            internal_mark = marks[k][ij].TOTAL_MARKS;
                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Letter Grade</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        string internal_mark = "";
                        if (marks[k].Count > ij)
                        {
                            internal_mark = marks[k][ij].LETTER_GRADE;
                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Grade Point</td>
                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            if (marks[k][ij].GRADE_POINT != null)
                            {
                                internal_mark = marks[k][ij].GRADE_POINT;
                            }

                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Retake Marks</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            if (marks[k][ij].SUPL_AVG_MARKS != null)
                            {
                                internal_mark = marks[k][ij].SUPL_AVG_MARKS;
                            }
                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Countable Marks</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            if (marks[k][ij].COUNTED_MARK != null)
                            {
                                internal_mark = marks[k][ij].COUNTED_MARK;
                            }

                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Letter Grade</td>

                    @for (int k = 0; k < marks.Count; k++)
                    {
                        string internal_mark = "";
                        if (marks[k].Count > ij)
                        {
                            internal_mark = marks[k][ij].LETTER_GRADE;
                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Grade Point</td>
                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal internal_mark = 0;
                        if (marks[k].Count > ij)
                        {
                            if (marks[k][ij].GRADE_POINT != null)
                            {
                                internal_mark = marks[k][ij].GRADE_POINT;
                            }

                        }

                        <td>@internal_mark</td>
                    }
                </tr>
                <tr>
                    <td>Point Secured</td>
                    @{ 
                        decimal tps = 0;
                    }
                    @for (int k = 0; k < marks.Count; k++)
                    {
                        decimal ps = 0;
                        
                        if (marks[k].Count > ij)
                        {
                            if (marks[k][ij].GRADE_POINT != null && marks[k][ij].CREDIT_EARNED!=null)
                            {
                                ps = marks[k][ij].GRADE_POINT* marks[k][ij].CREDIT_EARNED;
                            }
                        }
                        tps = ps + tps;

                        <td>@ps</td>
                    }
                    <td>@tps</td>
                </tr>
                ij++;
            }

        </table>
    </div>
    <br />
    <br />
    <div class="col-md-12" style="margin-top:20px;">
        <div class="footer-row">
            <div class="footer-table-1">
                <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
                    <tbody>
                        <tr>
                            <td colspan="9">Examination Committee&nbsp;as well as Tabulators</td>
                        </tr>
                        <tr>
                            <td colspan="2" rowspan="1">FIRST YEAR</td>
                            <td colspan="2" rowspan="1">SECOND YEAR</td>
                            <td colspan="2" rowspan="1">THIRD YEAR</td>
                            <td colspan="2" rowspan="1">FOURTH YEAR</td>
                        </tr>
                        <tr>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                        </tr>
                        <tr>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                        </tr>
                        <tr>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="footer-exam-committe-table float-left">
                <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
                    <tbody>
                        <tr>
                            <td colspan="9">Examination Committee</td>
                        </tr>
                        <tr>
                            <td colspan="2" rowspan="1">FIRST YEAR</td>
                            <td colspan="2" rowspan="1">SECOND YEAR</td>
                            <td colspan="2" rowspan="1">THIRD YEAR</td>
                            <td colspan="2" rowspan="1">FOURTH YEAR</td>
                        </tr>
                        <tr>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                            <td>1st Semester</td>
                            <td>2nd Semester</td>
                        </tr>
                        <tr>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                            <td>Regular</td>
                        </tr>
                        <tr>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                            <td>
                                <p>1--------------</p>
                                <p>2--------------</p>
                                <p>3--------------</p>
                                <p>4--------------</p>
                                <p>Date -&nbsp;</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="checked-by-table float-left">

                <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
                    <tbody>
                        <tr>
                            <td colspan="5">CHECKED BY</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td colspan="2" rowspan="1">1st Semester</td>
                            <td colspan="2" rowspan="1">1st Semester</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Regular</td>
                            <td>Retake</td>
                            <td>Regular</td>
                            <td>Retake</td>
                        </tr>
                        <tr>
                            <td>1st Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>2nd Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>3rd Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>4th Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="controller_exminer_table float-left">
                <table border="1" cellpadding="1" cellspacing="1" style="width:500px">
                    <tbody>
                        <tr>
                            <td colspan="5">CONTROLLER OF EXAMINATIONS</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td colspan="2" rowspan="1">1st Semester</td>
                            <td colspan="2" rowspan="1">1st Semester</td>
                        </tr>
                        <tr>
                            <td>&nbsp;</td>
                            <td>Regular</td>
                            <td>Retake</td>
                            <td>Regular</td>
                            <td>Retake</td>
                        </tr>
                        <tr>
                            <td>1st Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>2nd Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>3rd Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                        <tr>
                            <td>4th Yr.</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>

@section Scripts
{
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/_global.js"></script>
    <script src="~/Scripts/MvcGrid/mvc-grid.js"></script>
    <link href="~/Content/MvcGrid/mvc-grid.css" rel="stylesheet" />
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
    <link href="~/Content/_global.css" rel="stylesheet" />

    <script type="text/javascript">
        $(document).ready(function () {
            $("#err_message").hide();
            var getUrl = window.location;

            $(document).on("click", ".SearchReport", function () {
                var url = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1] + "/balambook/get_result";

                //Get Value
                var STUDENT_ID = $("#STUDENT_ID").val();
                var SEMESTER_ID = $("#SEMESTER_ID").val();
                var YEAR = $("#YEAR").val();
                var LEVEL_ID = $("#LEVEL_ID").val();
                var semester_name = $("#SEMESTER_ID option:selected").text();
                var semester_name1 = "";
                var year_name = $("#LEVEL_ID option:selected").text();
                var data_length = "";

                var print_param = STUDENT_ID + "," + SEMESTER_ID + "," + YEAR + "," + LEVEL_ID;

                var print_url = "/ControllerSection/Marksheet/viewer/?parameter=" + print_param;

                if (STUDENT_ID == "") {
                    $("#err_message").show();
                    $("#err_roll").html('Please input student roll');
                }
                else {
                    $("#err_roll").html('');
                }
                if (YEAR == "") {
                    $("#err_message").show();
                    $("#err_year").html('Please input exam year');
                }
                else {
                    $("#err_year").html('');
                }
                if (LEVEL_ID == "") {
                    $("#err_message").show();
                    $("#err_level").html('Please select academic year');
                }
                else {
                    $("#err_level").html('');
                }
                if (STUDENT_ID == "" || YEAR == "" || LEVEL_ID == "") {

                }
                else {
                    //Url for yearly Result Sheet
                    if (SEMESTER_ID == "") {
                        url = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1] + "/Marksheet/get_yearly_result";
                        data_length = 2;
                    }

                    //Declare Variables
                    var fls = { STUDENT_ID: STUDENT_ID, SEMESTER_ID: SEMESTER_ID, YEAR: YEAR, LEVEL_ID: LEVEL_ID }
                    $.ajax({
                        type: "POST",
                        url: url,
                        data: fls,
                        beforeSend: function () {
                            // $("#loader_view").show();
                        },
                        success: function (data) {

                            $("#div_result").show();
                            $("#report_head").html('');
                            $("#report_body").html('');
                            $("#grade_list").html('');
                            $("#semester1_body").html('');
                            $("#exam_year").html(YEAR);
                            $("#academic_year").html(year_name);
                            $("#std_info").html('');

                            $("#btn_print").attr("href", print_url);


                            var std_dtls = data[0].std_dtls;
                            var grade_dtls = data[0].grade_dtls;

                            var summery = "";
                            var courses = "";
                            var courses1 = "";
                            var summery1 = "";
                            var final_remarks = "";
                            if (data_length == 2) {
                                var semesters = data[0].semester_array;
                                semester_name = semesters[0].SEMESTER_NAME;
                                semester_name1 = semesters[1].SEMESTER_NAME;

                                //First Semester
                                courses = data[1].my_courses;
                                summery = data[1].summery;

                                //Second Semester
                                if (data[2] != null) {

                                    courses1 = data[2].my_courses;
                                    summery1 = data[2].summery;
                                    $("#second_semester").show();
                                    //$("#first_semester").removeClass('col-md-12');
                                    $("#second_semester").addClass('col-md-6');
                                    $("#first_semester").addClass('col-md-6');
                                    $("#semester2_title").html(semester_name1);

                                }
                                else {
                                    $("#second_semester").hide();

                                    $("#first_semester").addClass('col-md-12');
                                }
                                //Course Title
                                debugger;
                                $("#semester1_title").html(semester_name);
                                final_remarks = data[3];
                            }
                            else {
                                courses = data[0].my_courses;
                                summery = data[0].summery;
                                $("#semester1_title").html(semester_name);
                                final_remarks = data[0].remarks;
                                //Course Title
                                $("#second_semester").hide();
                                //("#first_semester").removeClass('col-md-6');
                                $("#first_semester").addClass('col-md-12');
                            }

                            //Header Content Student Details
                            $("#faculty_name").html(std_dtls.FACULTY_NAME);
                            $("#dept_name").html(std_dtls.DEPARTMENT_NAME);
                            $("#program_name").html(std_dtls.PROGRAM_NAME);
                            $("#session_year").html(std_dtls.APPLICANT_SESSION);

                            //Grade Details
                            $.each(grade_dtls, function (key, val) {

                                var min_marks = "";
                                if (key == 0) {
                                    min_marks = val.MINIMUM_MARKS + "% and above ";
                                }
                                else {
                                    min_marks = val.MINIMUM_MARKS + "% less than ";
                                }
                                var max_marks = val.MAXIMUM_MARKS;
                                var numerical_mark = min_marks + max_marks + "%";
                                var lg = val.LETTER_GRADE;
                                var gp = val.GRADE_POINT;
                                var remarks = val.REMARKS;
                                var grade_list = "<tr>" +
                                    "<td>" + numerical_mark + "</td>" +
                                    "<td>" + lg + "</td>" +
                                    "<td>" + gp + "</td>" +
                                    "<td>" + remarks + "</td>" +
                                    "</tr>";
                                $("#grade_list").append(grade_list);
                            });

                            //Course List
                            if (SEMESTER_ID != null) {

                                $.each(courses, function (key, val) {
                                    var cours_ls = "<tr id='course_list'><td>" + val.COURSE_CODE + "</td><td>" + val.COURSE_NAME + "</td></tr>";
                                    $("#semester1_body").append(cours_ls);
                                });
                            }
                            var title_second_sem = "";
                            if (courses1 != null) {
                                $.each(courses1, function (key, val) {
                                    var cours_ls1 = "<tr><td>" + val.COURSE_CODE + "</td><td>" + val.COURSE_NAME + "</td></tr>";
                                    $("#semester2_body").append(cours_ls1);
                                });
                                title_second_sem = "<td colspan='" + courses1.length + "'><b>" + semester_name1 + "</b></td>";
                            }


                            var reg_no = "";
                            if (std_dtls.REG_NO != null) {
                                reg_no = std_dtls.ROLL;
                            }

                            $("#std_info").append("<tr><td style='padding:3px;'><b>Name:</b> " + std_dtls.FULL_NAME + "</td><td style='padding:3px;'><b>Roll No.:</b> " + std_dtls.ROLL + "</td><td style='padding:3px;'><b>Reg. No.:</b> " + reg_no + "</td></tr>");

                            var th = "<tr id='semesters_title'><td colspan='" + Number(courses.length + 1) + "'><b>" + semester_name + "</b></td>" + title_second_sem + "</tr><tr><th style='border-top:none; border-left:none'>&nbsp;</th>";

                            var theory_marks = ["Theory"];
                            var internal_marks = ["Internal"];
                            var total_marks = ["Total Marks"];
                            var letter_grade = ["Letter Grade"];
                            var grade_point = ["Grade Point"];
                            var course_ps = ["PS"];
                            var ItemArray = [];
                            var ec = 0;
                            var ec1 = 0;
                            $.each(courses, function (key, val) {
                                th += "<td><b>" + val.COURSE_CODE + "<br>Credit:" + val.COURSE_CREDIT + "</b></td>";
                                theory_marks.push(val.AVG_MARKS);
                                internal_marks.push(val.INTERNAL_MARKS);
                                total_marks.push(val.AVG_MARKS + val.INTERNAL_MARKS);
                                letter_grade.push(val.LETTER_GRADE);
                                grade_point.push(val.GRADE_POINT);
                                course_ps.push(val.GRADE_POINT * val.CREDIT_EARNED);
                                ec = ec + val.CREDIT_EARNED;
                            });

                            if (courses1 != null) {
                                $.each(courses1, function (key_1, val_1) {
                                    th += "<td><b>" + val_1.COURSE_CODE + "<br>Credit:" + val_1.COURSE_CREDIT + "</b></td>";
                                    theory_marks.push(val_1.AVG_MARKS);
                                    internal_marks.push(val_1.INTERNAL_MARKS);
                                    total_marks.push(val_1.AVG_MARKS + val_1.INTERNAL_MARKS);
                                    letter_grade.push(val_1.LETTER_GRADE);
                                    grade_point.push(val_1.GRADE_POINT);
                                    course_ps.push(val_1.GRADE_POINT * val_1.CREDIT_EARNED);
                                    ec1 = ec1 + val_1.CREDIT_EARNED;
                                });

                            }

                            th + "</tr>";
                            $("#report_thead").append(th);

                            ItemArray.push(theory_marks);
                            ItemArray.push(internal_marks);
                            ItemArray.push(total_marks);
                            ItemArray.push(letter_grade);
                            ItemArray.push(grade_point);
                            ItemArray.push(course_ps);

                            $.each(ItemArray, function (i, val) {

                                th += "<tr>";
                                $.each(ItemArray[i], function (j, val1) {
                                    th += "<td>" + val1 + "</td>";
                                });
                                th += "</tr>";
                            });
                            debugger;
                            var total_ec = Number(ec + ec1);
                            var total_tps = summery.TPS;
                            //
                            if (summery1.TPS > 0) {
                                total_tps = Number(summery.TPS + Number(summery1.TPS));
                            }

                            th += "<tr><td>TPS</td><td colspan='" + Number(courses.length + courses1.length) + "'>" + total_tps + "</td></tr>";
                            th += "<tr><td>EC</td><td colspan='" + Number(courses.length + courses1.length) + "'>" + total_ec + "</td></tr>";
                            th += "<tr><td>GPA</td><td colspan='" + Number(courses.length + courses1.length) + "'>" + (total_tps / total_ec).toFixed(2) + "</td></tr>";
                            th += "<tr><td>Remarks</td><td colspan='" + Number(courses.length + courses1.length) + "'>" + final_remarks + "</td></tr>";
                            $("#report_body").append(th);

                            $.each(result, function (index, value) {
                                debugger;
                                var td = "";
                                td += "<td>" + value.stdid + "</td>";
                                var course_res = value.my_courses;
                                var summery = value.summery;
                                var tps = summery.TPS;
                                var gpa = summery.AVG_POINT;
                                var gpl = value.lg;

                                var total_subject = Number(course_res.length);
                                $.each(course_res, function (index1, value1) {

                                    var avg_mark = parseFloat(value1.AVG_MARKS);
                                    var internal_mark = parseFloat(value1.INTERNAL_MARKS);
                                    var gp = parseFloat(value1.GRADE_POINT);
                                    var credit = parseFloat(value1.CREDIT_EARNED);
                                    var lg = value1.LETTER_GRADE;
                                    var ps = parseFloat(value1.PS);

                                    var final_mark = (avg_mark + internal_mark);

                                    td += "<td>" + avg_mark + "</td>";
                                    td += "<td>" + internal_mark + "</td>";
                                    td += "<td>" + final_mark + "</td>";
                                    td += "<td>" + lg + "</td>";
                                    td += "<td>" + gp + "</td>";
                                    td += "<td>" + ps + "</td>";
                                });

                                td += "<td>" + tps + "</td><td>" + gpa + "</td><td>" + gpl + "</td>";
                                var tr_cr = "<tr>" + td + "</tr>";
                                $("#report_body").append(tr_cr);
                            });
                        }
                        //data: JSON.stringify(person)
                    });
                }

            });


            //Auto Complete
            $(document).on("keyup", "#STUDENT_ID", function () {
                debugger;
                var url = getUrl.protocol + "//" + getUrl.host + "/" + getUrl.pathname.split('/')[1] + "/balambook/get_student";
                $("#STUDENT_ID").autocomplete({
                    source: function (request, response) {
                        $.ajax({
                            url: url,
                            type: "POST",
                            dataType: "json",
                            data: { Prefix: request.term },
                            success: function (data) {
                                response($.map(data, function (item) {
                                    return { label: item.STUDENT_ID + "-" + item.FULL_NAME, value: item.STUDENT_ID };
                                }))
                            }
                        })
                    },
                    messages: {
                        noResults: "", results: ""
                    }
                });
            });

        });
    </script>
}